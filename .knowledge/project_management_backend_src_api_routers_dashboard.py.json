{"is_source_file": true, "format": "Python", "description": "This file defines API routes related to the dashboard, providing statistics such as total active projects, total revenue, revenue over the last 12 months, and recent projects for the authenticated user. It utilizes FastAPI for API routing, SQLAlchemy for database interactions, and defines internal helper functions to generate labels and process database rows.", "external_files": ["src.api.deps", "src.api.schemas.dashboard", "src.db.models", "src.db.session"], "external_methods": ["get_current_user", "get_db", "func.count", "func.coalesce", "func.sum", "func.to_char", "select", "desc"], "published": ["APIRouter", "get_dashboard_stats"], "classes": [], "methods": [{"name": "list[str] _month_labels_last_12_months(now: datetime)", "description": "Generates a list of month labels for the last 12 months, formatted as 'YYYY-MM', starting from oldest to newest.", "scope": "", "scopeKind": ""}, {"name": "RecentProjectItem _build_recent_project_item(row: Any)", "description": "Converts a database row containing project and client data into a RecentProjectItem response object.", "scope": "", "scopeKind": ""}, {"name": "DashboardStatsResponse get_dashboard_stats( db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "API endpoint handler that computes and returns various dashboard KPIs for the authenticated user, including active projects, total revenue, revenue by month for the past year, and recent projects.", "scope": "", "scopeKind": ""}], "calls": ["select", "func.count", "func.coalesce", "func.sum", "func.to_char", "db.execute", "desc", "max"], "search-terms": ["dashboard", "statistics", "recent_projects", "monthly_revenue", "active_projects"], "state": 2, "file_id": 24, "knowledge_revision": 54, "git_revision": "21a424521e24d09b43043df909149282f9bd2829", "ctags": [{"_type": "tag", "name": "_build_recent_project_item", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/dashboard.py", "pattern": "/^def _build_recent_project_item(row: Any) -> RecentProjectItem:$/", "language": "Python", "typeref": "typename:RecentProjectItem", "kind": "function", "signature": "(row: Any)"}, {"_type": "tag", "name": "_month_labels_last_12_months", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/dashboard.py", "pattern": "/^def _month_labels_last_12_months(now: datetime) -> list[str]:$/", "language": "Python", "typeref": "typename:list[str]", "kind": "function", "signature": "(now: datetime)"}, {"_type": "tag", "name": "get_dashboard_stats", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/dashboard.py", "pattern": "/^def get_dashboard_stats($/", "language": "Python", "typeref": "typename:DashboardStatsResponse", "kind": "function", "signature": "( db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/dashboard.py", "pattern": "/^router = APIRouter(prefix=\"\\/dashboard\", tags=[\"dashboard\"])$/", "language": "Python", "kind": "variable"}], "hash": "0c22217ad5ffd5ab4404ee86b1d40a22", "format-version": 4, "code-base-name": "project_management_backend", "filename": "project_management_backend/src/api/routers/dashboard.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/dashboard\", tags=[\"dashboard\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"54": "21a424521e24d09b43043df909149282f9bd2829"}]}