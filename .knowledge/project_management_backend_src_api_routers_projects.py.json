{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing 'projects' in a FastAPI application. It includes endpoints for listing, retrieving, creating, updating, and deleting projects, utilizing SQLAlchemy ORM models and schema validation.", "external_files": ["src.api.deps", "src.api.schemas.project", "src.db.models", "src.db.session"], "external_methods": ["get_current_user", "get_db", "ProjectCreateRequest", "ProjectResponse", "ProjectStatus", "ProjectUpdateRequest"], "published": ["router"], "classes": [{"name": "ProjectResponse", "description": "Schema for project data sent in API responses."}], "methods": [{"name": "ProjectResponse _to_project_response(project: Project)", "description": "Converts ORM Project instance to API response schema.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_client_belongs_to_user(db: Session, current_user: User, client_id: uuid.UUID)", "description": "Checks if the client belongs to the current user; raises 404 if not.", "scope": "", "scopeKind": ""}, {"name": "list[ProjectResponse] list_projects( db: Session = Depends(get_db), current_user: User = Depends(get_current_user), q: str | None = Query(None, description=\"Optional search query (matches project name/description).\"), status_filter: ProjectStatus | None = Query(None, alias=\"status\", description=\"Optional status filter.\"), client_id: uuid.UUID | None = Query(None, description=\"Optional filter by client id.\"), limit: int = Query(50, ge=1, le=200, description=\"Page size.\"), offset: int = Query(0, ge=0, description=\"Offset for pagination.\"), )", "description": "Lists projects for the current user with optional filters and pagination.", "scope": "", "scopeKind": ""}, {"name": "ProjectResponse get_project( project_id: uuid.UUID, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Retrieves a specific project by ID for the current user.", "scope": "", "scopeKind": ""}, {"name": "ProjectResponse create_project( payload: ProjectCreateRequest, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Creates a new project owned by the current user.", "scope": "", "scopeKind": ""}, {"name": "ProjectResponse update_project( project_id: uuid.UUID, payload: ProjectUpdateRequest, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Updates an existing project owned by the current user.", "scope": "", "scopeKind": ""}, {"name": "Response delete_project( project_id: uuid.UUID, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )", "description": "Deletes a project owned by the current user.", "scope": "", "scopeKind": ""}], "calls": ["select(Project)", "func.lower", "func.coalesce", "db.scalar", "db.add", "db.commit", "db.refresh", "db.delete"], "search-terms": ["projects", "FastAPI project routes", "project management endpoints", "CRUD projects API", "project ORM conversion"], "state": 2, "file_id": 22, "knowledge_revision": 48, "git_revision": "016f735b2a270ef4a67b21424faadf5ffd3f5b1a", "ctags": [{"_type": "tag", "name": "_ensure_client_belongs_to_user", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def _ensure_client_belongs_to_user(db: Session, current_user: User, client_id: uuid.UUID) -> Non/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(db: Session, current_user: User, client_id: uuid.UUID)"}, {"_type": "tag", "name": "_to_project_response", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def _to_project_response(project: Project) -> ProjectResponse:$/", "language": "Python", "typeref": "typename:ProjectResponse", "kind": "function", "signature": "(project: Project)"}, {"_type": "tag", "name": "create_project", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def create_project($/", "language": "Python", "typeref": "typename:ProjectResponse", "kind": "function", "signature": "( payload: ProjectCreateRequest, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "delete_project", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def delete_project($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( project_id: uuid.UUID, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "get_project", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def get_project($/", "language": "Python", "typeref": "typename:ProjectResponse", "kind": "function", "signature": "( project_id: uuid.UUID, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )"}, {"_type": "tag", "name": "list_projects", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def list_projects($/", "language": "Python", "typeref": "typename:list[ProjectResponse]", "kind": "function", "signature": "( db: Session = Depends(get_db), current_user: User = Depends(get_current_user), q: str | None = Query(None, description=\"Optional search query (matches project name/description).\"), status_filter: ProjectStatus | None = Query(None, alias=\"status\", description=\"Optional status filter.\"), client_id: uuid.UUID | None = Query(None, description=\"Optional filter by client id.\"), limit: int = Query(50, ge=1, le=200, description=\"Page size.\"), offset: int = Query(0, ge=0, description=\"Offset for pagination.\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^router = APIRouter(prefix=\"\\/projects\", tags=[\"projects\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_project", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303880-303889/project_management_backend/src/api/routers/projects.py", "pattern": "/^def update_project($/", "language": "Python", "typeref": "typename:ProjectResponse", "kind": "function", "signature": "( project_id: uuid.UUID, payload: ProjectUpdateRequest, db: Session = Depends(get_db), current_user: User = Depends(get_current_user), )"}], "hash": "2e83f5e1b60b0b291fbd333ee8c77ae7", "format-version": 4, "code-base-name": "project_management_backend", "filename": "project_management_backend/src/api/routers/projects.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/projects\", tags=[\"projects\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"48": "016f735b2a270ef4a67b21424faadf5ffd3f5b1a"}]}